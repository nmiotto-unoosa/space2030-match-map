<!doctype html>
<html>
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Space2030 Match Map (Lines Demo)</title>
<style>
  body { font-family: Arial, sans-serif; margin: 0; }
  #controls { display:flex; gap:12px; flex-wrap:wrap; padding:10px 12px; border-bottom:1px solid #ddd; }
  #controls label { font-size: 12px; color:#333; }
  #controls select, #controls input { padding:6px; }
  #layout { display:flex; height: calc(100vh - 66px); }
  #mapwrap { flex: 1 1 auto; min-width: 60%; height: 100%; }
  #mapwrap .plotly-graph-div { height: 100% !important; width: 100% !important; }
  #side { width: 460px; max-width: 44%; border-left:1px solid #ddd; padding:12px; overflow:auto; }
  #side h2 { margin: 0 0 8px 0; font-size: 16px; }
  .card { border:1px solid #eee; border-radius:10px; padding:10px; margin:10px 0; }
  .small { font-size: 12px; color:#555; }
  .badge { display:inline-block; padding:2px 6px; border-radius:8px; background:#f3f3f3; font-size:12px; margin-right:6px; }
  .muted { color:#777; }
</style>
</head>
<body>
<div id="controls">
  <div>
    <label>Mode</label><br/>
    <select id="mode">
      <option value="needs" selected>Show connections for NEEDS countries</option>
      <option value="solutions">Show connections for SOLUTIONS countries</option>
    </select>
  </div>
  <div>
    <label>Country</label><br/>
    <select id="country"></select>
  </div>
  <div>
    <label>Area filter</label><br/>
    <select id="area"></select>
  </div>
  <div>
    <label>Minimum match score</label><br/>
    <input id="minscore" type="range" min="0" max="1" step="0.05" value="0.35"/>
    <span id="minscoreval" class="small">0.35</span>
  </div>
  <div class="small muted" style="align-self:flex-end; padding-bottom:2px;">
    Lines are drawn to top matching counterpart countries (to reduce clutter).
  </div>
</div>

<div id="layout">
  <div id="mapwrap"><div>                        <script type="text/javascript">window.PlotlyConfig = {MathJaxConfig: 'local'};</script>
        <script src="https://cdn.plot.ly/plotly-2.4.1.min.js"></script>                <div id="bc7ec4f8-ba5f-4928-9253-7c5dff662d07" class="plotly-graph-div" style="height:100%; width:100%;"></div>            <script type="text/javascript">                                    window.PLOTLYENV=window.PLOTLYENV || {};                                    if (document.getElementById("bc7ec4f8-ba5f-4928-9253-7c5dff662d07")) {                    Plotly.newPlot(                        "bc7ec4f8-ba5f-4928-9253-7c5dff662d07",                        [{"coloraxis":"coloraxis","geo":"geo","hovertemplate":"<b>%{hovertext}</b><br><br>country=%{location}<br>matches=%{z}<extra></extra>","hovertext":["Australia","Austria","Brazil","Canada","Kingdom of Bahrain"],"locationmode":"country names","locations":["Australia","Austria","Brazil","Canada","Kingdom of Bahrain"],"name":"","type":"choropleth","z":[0,0,11,0,71]},{"hovertemplate":"<b>%{text}</b><extra></extra>","lat":[-25.0,47.5162,-10.0,56.1304,26.0667],"lon":[133.0,14.5501,-55.0,-106.3468,50.5577],"marker":{"size":6},"mode":"markers+text","name":"Countries","text":["Australia","Austria","Brazil","Canada","Kingdom of Bahrain"],"textposition":"top center","type":"scattergeo"},{"hoverinfo":"skip","lat":[],"line":{"width":2},"lon":[],"mode":"lines","name":"Matches","type":"scattergeo"}],                        {"coloraxis":{"colorbar":{"title":{"text":"matches"}},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"geo":{"center":{},"domain":{"x":[0.0,1.0],"y":[0.0,1.0]},"projection":{"type":"natural earth"}},"legend":{"tracegroupgap":0},"margin":{"b":0,"l":0,"r":0,"t":50},"template":{"data":{"bar":[{"error_x":{"color":"#2a3f5f"},"error_y":{"color":"#2a3f5f"},"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"bar"}],"barpolar":[{"marker":{"line":{"color":"#E5ECF6","width":0.5},"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"barpolar"}],"carpet":[{"aaxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"baxis":{"endlinecolor":"#2a3f5f","gridcolor":"white","linecolor":"white","minorgridcolor":"white","startlinecolor":"#2a3f5f"},"type":"carpet"}],"choropleth":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"choropleth"}],"contour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"contour"}],"contourcarpet":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"contourcarpet"}],"heatmap":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmap"}],"heatmapgl":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"heatmapgl"}],"histogram":[{"marker":{"pattern":{"fillmode":"overlay","size":10,"solidity":0.2}},"type":"histogram"}],"histogram2d":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2d"}],"histogram2dcontour":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"histogram2dcontour"}],"mesh3d":[{"colorbar":{"outlinewidth":0,"ticks":""},"type":"mesh3d"}],"parcoords":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"parcoords"}],"pie":[{"automargin":true,"type":"pie"}],"scatter":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter"}],"scatter3d":[{"line":{"colorbar":{"outlinewidth":0,"ticks":""}},"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatter3d"}],"scattercarpet":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattercarpet"}],"scattergeo":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergeo"}],"scattergl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattergl"}],"scattermapbox":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scattermapbox"}],"scatterpolar":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolar"}],"scatterpolargl":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterpolargl"}],"scatterternary":[{"marker":{"colorbar":{"outlinewidth":0,"ticks":""}},"type":"scatterternary"}],"surface":[{"colorbar":{"outlinewidth":0,"ticks":""},"colorscale":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"type":"surface"}],"table":[{"cells":{"fill":{"color":"#EBF0F8"},"line":{"color":"white"}},"header":{"fill":{"color":"#C8D4E3"},"line":{"color":"white"}},"type":"table"}]},"layout":{"annotationdefaults":{"arrowcolor":"#2a3f5f","arrowhead":0,"arrowwidth":1},"autotypenumbers":"strict","coloraxis":{"colorbar":{"outlinewidth":0,"ticks":""}},"colorscale":{"diverging":[[0,"#8e0152"],[0.1,"#c51b7d"],[0.2,"#de77ae"],[0.3,"#f1b6da"],[0.4,"#fde0ef"],[0.5,"#f7f7f7"],[0.6,"#e6f5d0"],[0.7,"#b8e186"],[0.8,"#7fbc41"],[0.9,"#4d9221"],[1,"#276419"]],"sequential":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]],"sequentialminus":[[0.0,"#0d0887"],[0.1111111111111111,"#46039f"],[0.2222222222222222,"#7201a8"],[0.3333333333333333,"#9c179e"],[0.4444444444444444,"#bd3786"],[0.5555555555555556,"#d8576b"],[0.6666666666666666,"#ed7953"],[0.7777777777777778,"#fb9f3a"],[0.8888888888888888,"#fdca26"],[1.0,"#f0f921"]]},"colorway":["#636efa","#EF553B","#00cc96","#ab63fa","#FFA15A","#19d3f3","#FF6692","#B6E880","#FF97FF","#FECB52"],"font":{"color":"#2a3f5f"},"geo":{"bgcolor":"white","lakecolor":"white","landcolor":"#E5ECF6","showlakes":true,"showland":true,"subunitcolor":"white"},"hoverlabel":{"align":"left"},"hovermode":"closest","mapbox":{"style":"light"},"paper_bgcolor":"white","plot_bgcolor":"#E5ECF6","polar":{"angularaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","radialaxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"scene":{"xaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"yaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"},"zaxis":{"backgroundcolor":"#E5ECF6","gridcolor":"white","gridwidth":2,"linecolor":"white","showbackground":true,"ticks":"","zerolinecolor":"white"}},"shapedefaults":{"line":{"color":"#2a3f5f"}},"ternary":{"aaxis":{"gridcolor":"white","linecolor":"white","ticks":""},"baxis":{"gridcolor":"white","linecolor":"white","ticks":""},"bgcolor":"#E5ECF6","caxis":{"gridcolor":"white","linecolor":"white","ticks":""}},"title":{"x":0.05},"xaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2},"yaxis":{"automargin":true,"gridcolor":"white","linecolor":"white","ticks":"","title":{"standoff":15},"zerolinecolor":"white","zerolinewidth":2}}},"title":{"text":"Space2030 Matches Map (with connection lines) â€” demo"}},                        {"responsive": true}                    )                };                            </script>        </div></div>
  <div id="side">
    <h2 id="sidetitle">Select a country</h2>
    <div class="small muted">Choose a country to draw connection lines and list top matches.</div>
    <div id="matches"></div>
  </div>
</div>

<script>
  const DATA = {"records": [{"match_id": "M-N-BHR-ACC-03-S-AUS-05", "need_id": "N-BHR-ACC-03", "solution_id": "S-AUS-05", "match_score": 0.655, "match_rationale": "same Space2030 area; shared terms: access, data, sar", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Accessibility", "solution_theme": "SAR EO facility access (NovaSAR-1)"}, {"match_id": "M-N-BHR-ECO-05-S-AUS-03", "need_id": "N-BHR-ECO-05", "solution_id": "S-AUS-03", "match_score": 0.655, "match_rationale": "same Space2030 area; shared terms: policy, regulation, space", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "National regulation & policy", "solution_area": "Space Economy", "solution_theme": "Safety regulation (air/space integration)"}, {"match_id": "M-N-BHR-ACC-01-S-AUS-05", "need_id": "N-BHR-ACC-01", "solution_id": "S-AUS-05", "match_score": 0.64, "match_rationale": "same Space2030 area; shared terms: data, imagery", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Accessibility", "solution_theme": "SAR EO facility access (NovaSAR-1)"}, {"match_id": "M-N-BHR-ECO-01-S-AUS-08", "need_id": "N-BHR-ECO-01", "solution_id": "S-AUS-08", "match_score": 0.633, "match_rationale": "same Space2030 area; shared terms: funding, grants", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Financing & PPPs", "solution_area": "Space Economy", "solution_theme": "Industry grants & capability uplift"}, {"match_id": "M-N-BHR-SOC-01-S-AUS-04", "need_id": "N-BHR-SOC-01", "solution_id": "S-AUS-04", "match_score": 0.632, "match_rationale": "same Space2030 area; shared terms: support, technical", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "EO for SDG reporting (LDN)"}, {"match_id": "M-N-BHR-ACC-02-S-AUS-05", "need_id": "N-BHR-ACC-02", "solution_id": "S-AUS-05", "match_score": 0.631, "match_rationale": "same Space2030 area; shared terms: data, infrastructure", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Accessibility", "solution_theme": "SAR EO facility access (NovaSAR-1)"}, {"match_id": "M-N-BHR-SOC-02-S-AUS-04", "need_id": "N-BHR-SOC-02", "solution_id": "S-AUS-04", "match_score": 0.631, "match_rationale": "same Space2030 area; shared terms: data, support", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "EO for SDG reporting (LDN)"}, {"match_id": "M-N-BHR-SOC-02-S-AUS-01", "need_id": "N-BHR-SOC-02", "solution_id": "S-AUS-01", "match_score": 0.63, "match_rationale": "same Space2030 area; shared terms: data, satellite", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "EO/AI for land management"}, {"match_id": "M-N-BHR-DIP-01-S-CAN-06", "need_id": "N-BHR-DIP-01", "solution_id": "S-CAN-06", "match_score": 0.629, "match_rationale": "same Space2030 area; shared terms: capacity-building, policy", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Diplomacy", "need_theme": "Multilateral influence & legal expertise", "solution_area": "Space Diplomacy", "solution_theme": "Space object registration capacity-building"}, {"match_id": "M-N-BHR-DIP-01-S-CAN-07", "need_id": "N-BHR-DIP-01", "solution_id": "S-CAN-07", "match_score": 0.628, "match_rationale": "same Space2030 area; shared terms: frameworks, policy", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Diplomacy", "need_theme": "Multilateral influence & legal expertise", "solution_area": "Space Diplomacy", "solution_theme": "Long-term sustainability (LTS) implementation"}, {"match_id": "M-N-BHR-SOC-02-S-AUT-01", "need_id": "N-BHR-SOC-02", "solution_id": "S-AUT-01", "match_score": 0.628, "match_rationale": "same Space2030 area; shared terms: space, training", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "UN/Austria Symposia (Space for Climate Action)"}, {"match_id": "M-N-BRA-ACC-01-S-CAN-09", "need_id": "N-BRA-ACC-01", "solution_id": "S-CAN-09", "match_score": 0.624, "match_rationale": "same Space2030 area; shared terms: data, open", "need_country": "Brazil", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Accessibility", "solution_theme": "NEOSSat & open ephemeris data"}, {"match_id": "M-N-BRA-ACC-01-S-AUS-06", "need_id": "N-BRA-ACC-01", "solution_id": "S-AUS-06", "match_score": 0.624, "match_rationale": "same Space2030 area; shared terms: data, open", "need_country": "Brazil", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Accessibility", "solution_theme": "Open EO data & platforms"}, {"match_id": "M-N-BRA-ACC-01-S-AUS-05", "need_id": "N-BRA-ACC-01", "solution_id": "S-AUS-05", "match_score": 0.624, "match_rationale": "same Space2030 area; shared terms: access, data", "need_country": "Brazil", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Accessibility", "solution_theme": "SAR EO facility access (NovaSAR-1)"}, {"match_id": "M-N-BHR-ACC-01-S-CAN-09", "need_id": "N-BHR-ACC-01", "solution_id": "S-CAN-09", "match_score": 0.619, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Accessibility", "solution_theme": "NEOSSat & open ephemeris data"}, {"match_id": "M-N-BHR-ACC-01-S-AUS-06", "need_id": "N-BHR-ACC-01", "solution_id": "S-AUS-06", "match_score": 0.619, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Accessibility", "solution_theme": "Open EO data & platforms"}, {"match_id": "M-N-BHR-ACC-01-S-CAN-08", "need_id": "N-BHR-ACC-01", "solution_id": "S-CAN-08", "match_score": 0.618, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Accessibility", "solution_theme": "CRAMS conjunction risk system"}, {"match_id": "M-N-BHR-DIP-01-S-AUS-02", "need_id": "N-BHR-DIP-01", "solution_id": "S-AUS-02", "match_score": 0.617, "match_rationale": "same Space2030 area; shared terms: policy", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Diplomacy", "need_theme": "Multilateral influence & legal expertise", "solution_area": "Space Diplomacy", "solution_theme": "Sustainability of space activities policy"}, {"match_id": "M-N-BHR-ECO-03-S-AUS-03", "need_id": "N-BHR-ECO-03", "solution_id": "S-AUS-03", "match_score": 0.617, "match_rationale": "same Space2030 area; shared terms: guidance", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Infrastructure & facilities", "solution_area": "Space Economy", "solution_theme": "Safety regulation (air/space integration)"}, {"match_id": "M-N-BHR-ACC-03-S-AUS-06", "need_id": "N-BHR-ACC-03", "solution_id": "S-AUS-06", "match_score": 0.617, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Accessibility", "solution_theme": "Open EO data & platforms"}, {"match_id": "M-N-BHR-ACC-03-S-CAN-09", "need_id": "N-BHR-ACC-03", "solution_id": "S-CAN-09", "match_score": 0.617, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Accessibility", "solution_theme": "NEOSSat & open ephemeris data"}, {"match_id": "M-N-BHR-SOC-01-S-CAN-02", "need_id": "N-BHR-SOC-01", "solution_id": "S-CAN-02", "match_score": 0.616, "match_rationale": "same Space2030 area; shared terms: across", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "Arctic Observing Mission (AOM) (planned)"}, {"match_id": "M-N-BHR-ACC-03-S-CAN-08", "need_id": "N-BHR-ACC-03", "solution_id": "S-CAN-08", "match_score": 0.616, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Accessibility", "solution_theme": "CRAMS conjunction risk system"}, {"match_id": "M-N-BHR-ACC-02-S-AUS-06", "need_id": "N-BHR-ACC-02", "solution_id": "S-AUS-06", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Accessibility", "solution_theme": "Open EO data & platforms"}, {"match_id": "M-N-BHR-ACC-02-S-CAN-09", "need_id": "N-BHR-ACC-02", "solution_id": "S-CAN-09", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Accessibility", "solution_theme": "NEOSSat & open ephemeris data"}, {"match_id": "M-N-BHR-SOC-01-S-AUT-02", "need_id": "N-BHR-SOC-01", "solution_id": "S-AUT-02", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: space-enabled", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "Space4ClimateAction webpage"}, {"match_id": "M-N-BHR-ECO-04-S-AUS-03", "need_id": "N-BHR-ECO-04", "solution_id": "S-AUS-03", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: space", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Commercialization & market access", "solution_area": "Space Economy", "solution_theme": "Safety regulation (air/space integration)"}, {"match_id": "M-N-BHR-DIP-01-S-CAN-05", "need_id": "N-BHR-DIP-01", "solution_id": "S-CAN-05", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: capacity-building", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Diplomacy", "need_theme": "Multilateral influence & legal expertise", "solution_area": "Space Diplomacy", "solution_theme": "Space4Women support & Gender Toolkit"}, {"match_id": "M-N-BHR-SOC-02-S-CAN-02", "need_id": "N-BHR-SOC-02", "solution_id": "S-CAN-02", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "Arctic Observing Mission (AOM) (planned)"}, {"match_id": "M-N-BHR-DIP-01-S-AUS-07", "need_id": "N-BHR-DIP-01", "solution_id": "S-AUS-07", "match_score": 0.615, "match_rationale": "same Space2030 area; shared terms: policy", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Diplomacy", "need_theme": "Multilateral influence & legal expertise", "solution_area": "Space Diplomacy", "solution_theme": "Space safety assurance"}, {"match_id": "M-N-BHR-ACC-02-S-CAN-08", "need_id": "N-BHR-ACC-02", "solution_id": "S-CAN-08", "match_score": 0.614, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Accessibility", "solution_theme": "CRAMS conjunction risk system"}, {"match_id": "M-N-BHR-SOC-02-S-CAN-03", "need_id": "N-BHR-SOC-02", "solution_id": "S-CAN-03", "match_score": 0.614, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "Terrestrial Snow Mass Mission (TSMM) (concept)"}, {"match_id": "M-N-BHR-SOC-02-S-CAN-01", "need_id": "N-BHR-SOC-02", "solution_id": "S-CAN-01", "match_score": 0.614, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "WildFireSat mission (planned 2029)"}, {"match_id": "M-N-BRA-ACC-01-S-CAN-08", "need_id": "N-BRA-ACC-01", "solution_id": "S-CAN-08", "match_score": 0.611, "match_rationale": "same Space2030 area; shared terms: data", "need_country": "Brazil", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Accessibility", "solution_theme": "CRAMS conjunction risk system"}, {"match_id": "M-N-BHR-ECO-05-S-AUS-08", "need_id": "N-BHR-ECO-05", "solution_id": "S-AUS-08", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "National regulation & policy", "solution_area": "Space Economy", "solution_theme": "Industry grants & capability uplift"}, {"match_id": "M-N-BHR-DIP-01-S-CAN-04", "need_id": "N-BHR-DIP-01", "solution_id": "S-CAN-04", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Diplomacy", "need_theme": "Multilateral influence & legal expertise", "solution_area": "Space Diplomacy", "solution_theme": "Support to COPUOS & outreach"}, {"match_id": "M-N-BHR-ECO-03-S-AUS-08", "need_id": "N-BHR-ECO-03", "solution_id": "S-AUS-08", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Infrastructure & facilities", "solution_area": "Space Economy", "solution_theme": "Industry grants & capability uplift"}, {"match_id": "M-N-BHR-ECO-02-S-AUS-08", "need_id": "N-BHR-ECO-02", "solution_id": "S-AUS-08", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Workforce development", "solution_area": "Space Economy", "solution_theme": "Industry grants & capability uplift"}, {"match_id": "M-N-BHR-ECO-02-S-AUS-03", "need_id": "N-BHR-ECO-02", "solution_id": "S-AUS-03", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Workforce development", "solution_area": "Space Economy", "solution_theme": "Safety regulation (air/space integration)"}, {"match_id": "M-N-BHR-SOC-01-S-CAN-03", "need_id": "N-BHR-SOC-01", "solution_id": "S-CAN-03", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "Terrestrial Snow Mass Mission (TSMM) (concept)"}, {"match_id": "M-N-BHR-ECO-04-S-AUS-08", "need_id": "N-BHR-ECO-04", "solution_id": "S-AUS-08", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Commercialization & market access", "solution_area": "Space Economy", "solution_theme": "Industry grants & capability uplift"}, {"match_id": "M-N-BHR-ECO-01-S-AUS-03", "need_id": "N-BHR-ECO-01", "solution_id": "S-AUS-03", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Economy", "need_theme": "Financing & PPPs", "solution_area": "Space Economy", "solution_theme": "Safety regulation (air/space integration)"}, {"match_id": "M-N-BHR-SOC-01-S-AUS-01", "need_id": "N-BHR-SOC-01", "solution_id": "S-AUS-01", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "EO/AI for land management"}, {"match_id": "M-N-BHR-SOC-01-S-CAN-01", "need_id": "N-BHR-SOC-01", "solution_id": "S-CAN-01", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "WildFireSat mission (planned 2029)"}, {"match_id": "M-N-BHR-SOC-01-S-AUT-01", "need_id": "N-BHR-SOC-01", "solution_id": "S-AUT-01", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Society", "solution_theme": "UN/Austria Symposia (Space for Climate Action)"}, {"match_id": "M-N-BHR-SOC-02-S-AUT-02", "need_id": "N-BHR-SOC-02", "solution_id": "S-AUT-02", "match_score": 0.6, "match_rationale": "same Space2030 area", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Society", "solution_theme": "Space4ClimateAction webpage"}, {"match_id": "M-N-BHR-ACC-01-S-AUS-04", "need_id": "N-BHR-ACC-01", "solution_id": "S-AUS-04", "match_score": 0.44, "match_rationale": "related Space2030 areas; shared terms: data, technical", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "EO for SDG reporting (LDN)"}, {"match_id": "M-N-BHR-ACC-01-S-AUS-01", "need_id": "N-BHR-ACC-01", "solution_id": "S-AUS-01", "match_score": 0.438, "match_rationale": "related Space2030 areas; shared terms: data, satellite", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "EO/AI for land management"}, {"match_id": "M-N-BHR-ACC-03-S-AUS-04", "need_id": "N-BHR-ACC-03", "solution_id": "S-AUS-04", "match_score": 0.435, "match_rationale": "related Space2030 areas; shared terms: data, technical", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "EO for SDG reporting (LDN)"}, {"match_id": "M-N-BHR-ACC-02-S-CAN-02", "need_id": "N-BHR-ACC-02", "solution_id": "S-CAN-02", "match_score": 0.432, "match_rationale": "related Space2030 areas; shared terms: data, mission", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "Arctic Observing Mission (AOM) (planned)"}, {"match_id": "M-N-BHR-ACC-02-S-AUS-04", "need_id": "N-BHR-ACC-02", "solution_id": "S-AUS-04", "match_score": 0.431, "match_rationale": "related Space2030 areas; shared terms: data, technical", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "EO for SDG reporting (LDN)"}, {"match_id": "M-N-BHR-ACC-02-S-CAN-01", "need_id": "N-BHR-ACC-02", "solution_id": "S-CAN-01", "match_score": 0.43, "match_rationale": "related Space2030 areas; shared terms: data, mission", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "WildFireSat mission (planned 2029)"}, {"match_id": "M-N-BHR-ACC-02-S-CAN-03", "need_id": "N-BHR-ACC-02", "solution_id": "S-CAN-03", "match_score": 0.429, "match_rationale": "related Space2030 areas; shared terms: data, mission", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "Terrestrial Snow Mass Mission (TSMM) (concept)"}, {"match_id": "M-N-BRA-ACC-01-S-AUS-04", "need_id": "N-BRA-ACC-01", "solution_id": "S-AUS-04", "match_score": 0.424, "match_rationale": "related Space2030 areas; shared terms: data, technical", "need_country": "Brazil", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "EO for SDG reporting (LDN)"}, {"match_id": "M-N-BRA-ACC-01-S-AUT-01", "need_id": "N-BRA-ACC-01", "solution_id": "S-AUT-01", "match_score": 0.422, "match_rationale": "related Space2030 areas; shared terms: capacity-building, space", "need_country": "Brazil", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "UN/Austria Symposia (Space for Climate Action)"}, {"match_id": "M-N-BHR-ACC-01-S-CAN-02", "need_id": "N-BHR-ACC-01", "solution_id": "S-CAN-02", "match_score": 0.42, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "Arctic Observing Mission (AOM) (planned)"}, {"match_id": "M-N-BHR-ACC-01-S-CAN-01", "need_id": "N-BHR-ACC-01", "solution_id": "S-CAN-01", "match_score": 0.418, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "WildFireSat mission (planned 2029)"}, {"match_id": "M-N-BHR-ACC-01-S-CAN-03", "need_id": "N-BHR-ACC-01", "solution_id": "S-CAN-03", "match_score": 0.417, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "Terrestrial Snow Mass Mission (TSMM) (concept)"}, {"match_id": "M-N-BHR-ACC-03-S-CAN-02", "need_id": "N-BHR-ACC-03", "solution_id": "S-CAN-02", "match_score": 0.417, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "Arctic Observing Mission (AOM) (planned)"}, {"match_id": "M-N-BHR-ACC-03-S-CAN-01", "need_id": "N-BHR-ACC-03", "solution_id": "S-CAN-01", "match_score": 0.416, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "WildFireSat mission (planned 2029)"}, {"match_id": "M-N-BHR-ACC-03-S-AUS-01", "need_id": "N-BHR-ACC-03", "solution_id": "S-AUS-01", "match_score": 0.416, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "EO/AI for land management"}, {"match_id": "M-N-BHR-SOC-02-S-AUS-06", "need_id": "N-BHR-SOC-02", "solution_id": "S-AUS-06", "match_score": 0.415, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Accessibility", "solution_theme": "Open EO data & platforms"}, {"match_id": "M-N-BHR-ACC-03-S-AUT-01", "need_id": "N-BHR-ACC-03", "solution_id": "S-AUT-01", "match_score": 0.415, "match_rationale": "related Space2030 areas; shared terms: training", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "UN/Austria Symposia (Space for Climate Action)"}, {"match_id": "M-N-BHR-SOC-01-S-AUS-05", "need_id": "N-BHR-SOC-01", "solution_id": "S-AUS-05", "match_score": 0.415, "match_rationale": "related Space2030 areas; shared terms: access", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Accessibility", "solution_theme": "SAR EO facility access (NovaSAR-1)"}, {"match_id": "M-N-BHR-SOC-02-S-CAN-09", "need_id": "N-BHR-SOC-02", "solution_id": "S-CAN-09", "match_score": 0.415, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Accessibility", "solution_theme": "NEOSSat & open ephemeris data"}, {"match_id": "M-N-BHR-SOC-02-S-AUS-05", "need_id": "N-BHR-SOC-02", "solution_id": "S-AUS-05", "match_score": 0.415, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Accessibility", "solution_theme": "SAR EO facility access (NovaSAR-1)"}, {"match_id": "M-N-BHR-ACC-03-S-CAN-03", "need_id": "N-BHR-ACC-03", "solution_id": "S-CAN-03", "match_score": 0.415, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "Terrestrial Snow Mass Mission (TSMM) (concept)"}, {"match_id": "M-N-BHR-ACC-02-S-AUS-01", "need_id": "N-BHR-ACC-02", "solution_id": "S-AUS-01", "match_score": 0.414, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "EO/AI for land management"}, {"match_id": "M-N-BHR-SOC-02-S-CAN-08", "need_id": "N-BHR-SOC-02", "solution_id": "S-CAN-08", "match_score": 0.414, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Education & skills", "solution_area": "Space Accessibility", "solution_theme": "CRAMS conjunction risk system"}, {"match_id": "M-N-BHR-ACC-02-S-AUT-01", "need_id": "N-BHR-ACC-02", "solution_id": "S-AUT-01", "match_score": 0.413, "match_rationale": "related Space2030 areas; shared terms: capacity-building", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "UN/Austria Symposia (Space for Climate Action)"}, {"match_id": "M-N-BRA-ACC-01-S-CAN-02", "need_id": "N-BRA-ACC-01", "solution_id": "S-CAN-02", "match_score": 0.412, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Brazil", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "Arctic Observing Mission (AOM) (planned)"}, {"match_id": "M-N-BRA-ACC-01-S-AUS-01", "need_id": "N-BRA-ACC-01", "solution_id": "S-AUS-01", "match_score": 0.411, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Brazil", "solution_country": "Australia", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "EO/AI for land management"}, {"match_id": "M-N-BRA-ACC-01-S-CAN-01", "need_id": "N-BRA-ACC-01", "solution_id": "S-CAN-01", "match_score": 0.411, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Brazil", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "WildFireSat mission (planned 2029)"}, {"match_id": "M-N-BRA-ACC-01-S-CAN-03", "need_id": "N-BRA-ACC-01", "solution_id": "S-CAN-03", "match_score": 0.411, "match_rationale": "related Space2030 areas; shared terms: data", "need_country": "Brazil", "solution_country": "Canada", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "Terrestrial Snow Mass Mission (TSMM) (concept)"}, {"match_id": "M-N-BHR-ACC-01-S-AUT-01", "need_id": "N-BHR-ACC-01", "solution_id": "S-AUT-01", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "UN/Austria Symposia (Space for Climate Action)"}, {"match_id": "M-N-BHR-ACC-02-S-AUT-02", "need_id": "N-BHR-ACC-02", "solution_id": "S-AUT-02", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "Infrastructure (ground/mission)", "solution_area": "Space Society", "solution_theme": "Space4ClimateAction webpage"}, {"match_id": "M-N-BHR-ACC-03-S-AUT-02", "need_id": "N-BHR-ACC-03", "solution_id": "S-AUT-02", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "Data openness (SAR/hyperspectral)", "solution_area": "Space Society", "solution_theme": "Space4ClimateAction webpage"}, {"match_id": "M-N-BHR-SOC-01-S-CAN-09", "need_id": "N-BHR-SOC-01", "solution_id": "S-CAN-09", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Accessibility", "solution_theme": "NEOSSat & open ephemeris data"}, {"match_id": "M-N-BHR-SOC-01-S-AUS-06", "need_id": "N-BHR-SOC-01", "solution_id": "S-AUS-06", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Australia", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Accessibility", "solution_theme": "Open EO data & platforms"}, {"match_id": "M-N-BRA-ACC-01-S-AUT-02", "need_id": "N-BRA-ACC-01", "solution_id": "S-AUT-02", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Brazil", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "Open science / Open Universe platform", "solution_area": "Space Society", "solution_theme": "Space4ClimateAction webpage"}, {"match_id": "M-N-BHR-SOC-01-S-CAN-08", "need_id": "N-BHR-SOC-01", "solution_id": "S-CAN-08", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Canada", "need_area": "Space Society", "need_theme": "Access to applications", "solution_area": "Space Accessibility", "solution_theme": "CRAMS conjunction risk system"}, {"match_id": "M-N-BHR-ACC-01-S-AUT-02", "need_id": "N-BHR-ACC-01", "solution_id": "S-AUT-02", "match_score": 0.4, "match_rationale": "related Space2030 areas", "need_country": "Kingdom of Bahrain", "solution_country": "Austria", "need_area": "Space Accessibility", "need_theme": "High-resolution EO data", "solution_area": "Space Society", "solution_theme": "Space4ClimateAction webpage"}], "countries": ["Australia", "Austria", "Brazil", "Canada", "Kingdom of Bahrain"], "areas": ["All", "Space Accessibility", "Space Diplomacy", "Space Economy", "Space Society"], "coords": {"Kingdom of Bahrain": {"lat": 26.0667, "lon": 50.5577}, "Brazil": {"lat": -10.0, "lon": -55.0}, "Australia": {"lat": -25.0, "lon": 133.0}, "Austria": {"lat": 47.5162, "lon": 14.5501}, "Canada": {"lat": 56.1304, "lon": -106.3468}}};
  const mapDiv = document.querySelector('#mapwrap .plotly-graph-div');

  const modeEl = document.getElementById('mode');
  const countryEl = document.getElementById('country');
  const areaEl = document.getElementById('area');
  const minEl = document.getElementById('minscore');
  const minValEl = document.getElementById('minscoreval');
  const titleEl = document.getElementById('sidetitle');
  const matchesEl = document.getElementById('matches');

  function fillSelect(el, items) {
    el.innerHTML = "";
    for (const it of items) {
      const opt = document.createElement('option');
      opt.value = it;
      opt.textContent = it;
      el.appendChild(opt);
    }
  }
  fillSelect(countryEl, ["(choose)"].concat(DATA.countries));
  fillSelect(areaEl, DATA.areas);

  function currentFilters() {
    return {
      mode: modeEl.value,
      country: countryEl.value === "(choose)" ? "" : countryEl.value,
      area: areaEl.value,
      minscore: parseFloat(minEl.value)
    };
  }

  function filterRecords(f) {
    return DATA.records.filter(r => {
      if (r.match_score < f.minscore) return false;
      if (f.area !== "All") {
        if (f.mode === "needs" && r.need_area !== f.area) return false;
        if (f.mode === "solutions" && r.solution_area !== f.area) return false;
      }
      return true;
    });
  }

  function updateChoropleth(f) {
    const recs = filterRecords(f);
    const counts = new Map();
    recs.forEach(r => {
      const key = (f.mode === "needs") ? r.need_country : r.solution_country;
      counts.set(key, (counts.get(key) || 0) + 1);
    });
    const z = DATA.countries.map(c => counts.get(c) || 0);
    // choropleth is trace 0
    Plotly.restyle(mapDiv, { z: [z], locations: [DATA.countries] }, [0]);
  }

  function drawLines(f, selectedCountry) {
    // lines trace index: 2 (0=choropleth,1=markers,2=lines)
    if (!selectedCountry) {
      Plotly.restyle(mapDiv, {lat:[[]], lon:[[]]}, [2]);
      return;
    }
    const recs = filterRecords(f)
      .filter(r => (f.mode === "needs" ? r.need_country === selectedCountry : r.solution_country === selectedCountry))
      .sort((a,b) => b.match_score - a.match_score);

    // Build top counterpart countries list (aggregate best score per counterpart)
    const best = new Map();
    recs.forEach(r => {
      const other = (f.mode === "needs") ? r.solution_country : r.need_country;
      const prev = best.get(other);
      if (!prev || r.match_score > prev) best.set(other, r.match_score);
    });
    const top = Array.from(best.entries()).sort((a,b)=>b[1]-a[1]).slice(0, 10).map(x=>x[0]);

    const lat = [];
    const lon = [];
    top.forEach(other => {
      const a = DATA.coords[selectedCountry];
      const b = DATA.coords[other];
      if (!a || !b) return;
      // line segments separated by nulls
      lat.push(a.lat, b.lat, null);
      lon.push(a.lon, b.lon, null);
    });
    Plotly.restyle(mapDiv, {lat:[lat], lon:[lon]}, [2]);
  }

  function renderMatches(f, selectedCountry) {
    titleEl.textContent = selectedCountry || "Select a country";
    matchesEl.innerHTML = "";
    if (!selectedCountry) return;

    const recs = filterRecords(f)
      .filter(r => (f.mode === "needs" ? r.need_country === selectedCountry : r.solution_country === selectedCountry))
      .sort((a,b)=>b.match_score-a.match_score)
      .slice(0, 30);

    if (recs.length === 0) {
      matchesEl.innerHTML = '<div class="small muted">No matches under current filters.</div>';
      return;
    }

    recs.forEach(r => {
      const otherCountry = (f.mode === "needs") ? r.solution_country : r.need_country;
      const leftArea = (f.mode === "needs") ? r.need_area : r.solution_area;
      const leftTheme = (f.mode === "needs") ? r.need_theme : r.solution_theme;
      const rightArea = (f.mode === "needs") ? r.solution_area : r.need_area;
      const rightTheme = (f.mode === "needs") ? r.solution_theme : r.need_theme;

      const card = document.createElement('div');
      card.className = 'card';
      card.innerHTML = `
        <div class="small"><span class="badge">${r.match_score.toFixed(2)}</span> <b>${otherCountry}</b></div>
        <div class="small" style="margin-top:6px;">
          <b>${leftArea}</b> â€” ${leftTheme}<br/>
          â†” <b>${rightArea}</b> â€” ${rightTheme}
        </div>
        <div class="small muted" style="margin-top:6px;">Why: ${r.match_rationale}</div>
      `;
      matchesEl.appendChild(card);
    });
  }

  function onChange() {
    minValEl.textContent = parseFloat(minEl.value).toFixed(2);
    const f = currentFilters();
    updateChoropleth(f);
    drawLines(f, f.country);
    renderMatches(f, f.country);
  }

  modeEl.addEventListener('change', onChange);
  countryEl.addEventListener('change', onChange);
  areaEl.addEventListener('change', onChange);
  minEl.addEventListener('input', onChange);
  onChange();
</script>
</body>
</html>
